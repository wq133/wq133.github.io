---
layout: post
title: 面试
subtitle: ...
date: 2024-01-18
author: Wu
header-img: ../article_img/kb_1.jpg
catalog: true
tags:
  - Java
  - 面试
---
## 〇、面试投递

打招呼用语：
您好，我想应聘您公司的Java开发工程师，学历本科，目前是三年的工作经验了，我熟悉常见设计模式，熟悉Spring、SpringMVC、SpringBoot、SpringCloud框架，使用过多种中间件Gateway、Nacos、OpenFeign等，有Devops的经验，适应敏捷开发模式，具体细节已附上简历，麻烦您回复下消息，我把简历发给您。祝您生活愉快。

## 一、简历项目部分
#### 项目描述

1. 绩牛平台
- 资讯点评的迭代，我们这里做了一个升级，一就是把银行证券的金融产品，可以通过cms后台配置，展示到我们客户端小程序的资讯详情 下方的精选产品中去；原先就是我们通过配置job从指定公众号/平台每天8:30除了周六日，去更新这个财经早报类型的资讯。第二个升级，就是将高频次访问（也就是超过10次的资讯的内容包括关联的产品都缓存到redis中去，用hash类型存储）的数据缓存，降低数据库 IO；然后我们还做了一个基于 Redis 的分布式锁解决并发和一致性问题（防止ABA问题）。
- 群活码的设计：实际就是通过企业微信提供的接口，+产品定义的一套逻辑，实现在cms端配置群活码，完成部分统计需求、包括扫码统计、进退群统计、客户流失提醒等需求。设计就是，群活码id，群的groupId发送给企微，群活码名称，还有configId，自定义的State字段，prefix，path，来配置群活码在企微的页面。
- 素材中心的审核升级，方案调研->[工作流](https://juejin.cn/post/7001058910194892831?searchId=2024040415100066E88301FCE9FA0C91CF#heading-48)（稍微复杂，有成本），标识位（简单可维护性）。通过工厂模式+策略模式，来完成审核者和提交者的业务逻辑。（撤回审核，提交审核，查询处理，批量处理等）。提交者就是，通过我们cms后台配置等权限码的显隐来控制页面tab变化，然后进行对素材的提交审核（包括海报、文件、话术）；审核者也是通过权限码勾选，进行权限的配置，整个审核流程就是，提交者提交，审核者在待审核的列表查看到，审核通过/拒绝（注明原因）。提交者还可以进行撤回，对素材进行更改再次提交。（权限问题：我们字段设计通过员工id记录，每个员工只能看自己的提交记录，审核者有权限查看单一素材的审核记录。）
- 轮播图的开发，基于活动模块新建的轮播图模块，通过cms后台新建轮播图片配置已有的活动链接实现跳转（这里的链接是小程序链接，是活动权益产品线做的配置），还有就是cms后台配置轮播图自动上架/下架时间，用XXLJob定时任务的功能（在 XXL-Job 中，"GLUE" 配置项有两个选项：BEAN 模式：在 BEAN 模式下，任务的执行是异步的，即使前一个任务仍在执行，下一个任务也会立即创建并开始执行。GLUE_JAVA 模式：在 GLUE_JAVA 模式下，任务的执行是同步的，下一个任务会等待前一个任务完成后再创建。默认情况下，XXL-Job 的 "GLUE" 配置项为 BEAN 模式，因此即使任务A在第五秒触发时仍在运行，XXL-Job 会直接创建新的任务A，并与正在运行的任务A并行执行。），用户在小程序中点击轮播图跳转活动后，上报埋点数据，以及执行任务失败后续优化的方案设计等。
- 数据源对接部分，通过Http调用其他供应商的数据，编写业务逻辑（主要就是一个工资明细信息包括基本信息、绩效信息展示），写一个FTP绩效计算器，cms后台去配置一些利率（前端实现计算）。需要供应商提供，url（调用方式http、FeignClient调用），请求参数格式（application/json；### multipart/form-data；x-www-form-urlencoded；### text/xml），参数/响应字段名称、类型、字段说明，接口请求方式（post、get...）。
- 一键海报是企业微信的一个基础应用，利用正则匹配解决多部门员工匹配问题。
```java
private QueryWrapper<PublicWord> createWrapper(Long groupId, WordType wordType, String departmentIds, String userId) {  
    return new QueryWrapper<PublicWord>()  
            .eq(null != groupId, "t1.group_id", groupId)  
            .eq(null != wordType, "t1.word_type", wordType)  
            .eq("t1.material_audit_status", MaterialAuditStatus.HAS_UP)  
            .and(wq1 -> wq1.isNull("t1.use_dept_id").or()  
                    .apply(com.baomidou.mybatisplus.core.toolkit.StringUtils.isNotEmpty(departmentIds),  
                            "concat( ',', {0}, ',' ) REGEXP concat( ',(', REPLACE ( t1.use_dept_id, ',', '|' ), '),' )", departmentIds))  
            .last(groupId != null ? " order by t1.is_top desc , t1.sort desc ,t1.update_time desc" : "order by t1.update_time desc ");  
}
```
```sql
SELECT * FROM public_word t1 
WHERE (groupId IS NOT NULL AND t1.group_id = groupId) 
AND (wordType IS NOT NULL AND t1.word_type = wordType)
AND t1.material_audit_status = 'HAS_UP' 
AND (t1.use_dept_id IS NULL OR CONCAT(',', t1.use_dept_id, ',') REGEXP CONCAT(',(', REPLACE(t1.use_dept_id, ',', '|'), '),' )) 
ORDER BY t1.is_top DESC, t1.sort DESC, t1.update_time DESC
```
- 渠道活码业务其实就是通过请求企业微信生成一个活码，跳转到员工好友二维码页面。主要字段有渠道名称，描述，渠道类型（单人/多人），联系我类型（员工/部门），configId，标签id，生成的渠道活码url，分配规则，渠道活码类型？（渠道活码/区域活码），员工欢迎语id。调用企微创建联系我配置，传参数就是传递一type、scene、remark、企业自定义的state参数。还有一张渠道员工关系表（主要就是配置单轮扫码上限、每日扫码上限，还有员工的信息（包括员工id，员工userI，一些其他需要展示的@TableField(exist = false)的字段））。
- 节日关怀，其实就是在原有的节日关怀的基础上，

2.三层限流

主要是用mq进行一个异步削峰，其次就是一个三层限流的设计：
nginx 的 ngx_http_limit_req_module 模块提供限制请求处理速率的能力，使用了漏桶算法。nginx 中有两个主要的指令可以用来配置限流:limit_req_zone 和 limit_req。

比如如下例子:
limit reg zone $binary remote addr zone=test:10m rate=10r/s;
解析
- 通过ip进行限流
- binary：压缩（存储不同的ip、当前ip的处理速率，存储到nginx自身服务器的内存中，）
- zone：是作为一个存储空间的key，10m代表10MB。（为啥是10MB，1MB能存多少？答：1MB能存1.6w个左右，根据当前项目用户数量设置大小）
- rate：当前IP访问速率的设置，10次每秒
 
server{
	location/{
		limit reg zone=test burst=5 nodelay;
}

- zone通过指定zone的空间名，来链接Nginx。
- 考虑到超过10次，burst=5，设置额外5次访问次数
- nodelay：无需等待，最大请求速率：15次。

nginx的 ngx_http_limit_conn_module 模块提供限制连接数的能力。
包含两个指令 limit_conn_zone和 limit_conn。比如如下例子!
limit conn zone $binary remote addr zone=perip:10mlimit conn zone $server name zonezperserver:10m;server{
location ~* \.(html)${limit conn perip 3;limit conn perserver 1000;
7 3个


3.总账**DDD领域驱动**
设计上：其实和MVC的区别就是Service以一个类似于proxy的形式又注入了一层，这一层Service，注入了一个对应业务的Event，当这个业务接口被调用的时候，这边会出发指定的Event事件通知相关的模型。
DDD 中的领域事件（Domain Event）是一种事件驱动的设计模式，它用于处理领域对象之间的关联和状态变化，并通过事件发布机制来通知其他对象。


#### 回话存档功能TODO
#### Saas项目的多租户实现

多租户方案是指一个软件系统可以为多个不同的租户（或客户）提供服务，每个租户拥有独立的数据和配置，但共享同一个软件实例。在 Spring Boot 中实现多租户方案，可以借助 `ThreadLocal` 来动态传递租户信息，同时结合线程池的使用，以便在子线程中继承父线程的租户信息。

#### RPC（远程过程调用）和 HTTP 的分布式系统
两种不同的远程通信机制
1. **通信协议**：
- **RPC**：RPC 是一种基于二进制的通信协议，通常使用自定义的协议栈，如 Dubbo、gRPC 等，它们在网络传输时效率更高，适用于高性能的远程调用。
- **HTTP**：HTTP 是一种基于文本的通信协议，通常使用 JSON 或 XML 等文本格式进行数据传输，虽然易于阅读和调试，但相对于二进制协议，效率较低。
2. **数据序列化**：
- **RPC**：RPC 框架通常使用二进制序列化来传输数据，可以更高效地使用网络带宽和解析数据，如 Protobuf、Thrift 等。
- **HTTP**：基于 HTTP 的通信通常使用文本格式（如 JSON、XML）进行数据传输，数据量较大，解析和序列化效率相对较低。
3. **使用场景**：
- **RPC**：RPC 适用于需要高性能和低延迟的场景，如微服务架构、分布式系统中的服务间通信等。
- **HTTP**：HTTP 适用于各种类型的分布式系统，包括基于 RESTful 架构的 Web 服务、前后端通信、跨域通信等。
4. **可用性和容错**：
- **RPC**：RPC 框架通常集成了丰富的容错机制，如负载均衡、熔断器、重试机制等，可以提高系统的可用性和容错能力。
- **HTTP**：基于 HTTP 的分布式系统也可以实现一定程度的容错和重试机制，但通常需要自行实现或借助其他组件。
5. **技术栈和生态系统**：
- **RPC**：RPC 框架通常有着独立的技术栈和生态系统，提供了丰富的功能和工具支持，如 Dubbo、gRPC 等。
- **HTTP**：基于 HTTP 的分布式系统更加通用，可以使用各种语言和框架进行开发，有着更广泛的技术栈和生态系统。

## 二、专业技能八股总结

#### OOP编程思想、集合、IO、并发编程
- ArrayList底层原理
- HashMap底层原理
- 进程、线程、协程
- 串行和并发
- 问多线程？（completablefuture、线程池配置来讲、）

#### JVM：内存区域，GC机制，类加载机制、JVM常用参数
内存区域实际就是，由运行时数据区域和本地内存构成的。
运行时数据区域包括堆、栈、方法去、程序计数器、虚拟机栈构成，直接内存。
线程私有：程序计数器、虚拟机栈、本地方法栈；线程共享：堆、方法区、直接内存 (非运行时数据区的一部分)

程序计数器就是  字节码解释器 通过 改变程序计数器 ，来依次读取指令，从而实现代码的流程控制（顺序执行、选择、循环、异常处理）。还有在多线程的情况下，程序计数器是用来记录当前线程执行的位置，从而当线程被切换回来的时候能够知道该线程上次运行到哪儿了。

栈里主要是由一个个栈帧构成的，栈帧里面存放的是局部变量表、操作数栈、动态链接、方法返回地址。生命周期和线程相同，随着线程的创建而创建，随着线程的死亡而死亡。
方法调用的数据要通过栈帧来传递，每一个方法调用都有一个对应的栈帧**压入栈**，每一个方法调用结束都会有个栈帧被**弹出栈**。
- 局部变量表：存放一些基础数据类型的数据、还有对象引用的地址；
- 操作数栈：存放方法执行过程中产生的结果、一些临时的变量；
- 动态链接：其实就是为了将**符号引用**转换为调用方法的**直接引用**，这个过程也被称为 **动态连接** 。符号引用类似：`Class<?> clazz = String.class/ int length = str.length();`

堆，JDK1.7的时候就是新生代内存(Young Generation)（Eden 区、两个 Survivor 区 S0 和 S1 都属于新生代）、老生代(Old Generation)、永久代(Permanent Generation)；1.8就是把永久代的实现方式替换成元空间（存放在直接内存中）；JDK 1.8 之前的方法区实现是永久代，JDK 1.8 及以后方法区的实现变成了元空间。

堆中最容易出现的错误是oom，栈中最容易出现的错误是stackoverflow和内存泄漏导致的oom；

**GC机制**
GC主要目的是管理和释放内存，防止内存泄漏和内存溢出。GC的主要对象是堆，内存分配和GC的流程如下：
1.所有对象第一次分配内存空间在堆的新生代的Eden区，如果Eden下一次分配其他对象内存不够时，就会执行MincroGc，这时候会如果第一个对象还在引用链上，我们把这个对象转移到Survivor0区域，这时候这个对象的**年龄**初始化为0（这个年龄就代表每个对象在一个区域中经历GC的次数，当这个次数到达默认值15，就会被存入老年代）。

2.如果转移到Survivor0区域内存也不够，我们这里会利用一个分配担保机制，提前把这个对象转移到老年代中去，老年代如果够放这个对象a，我们就放到老年代；不够就执行FullGc,FullGc会回收包括新生代和老年代的无用对象，如果在 Full GC 后发现老年代仍然无法容纳分配的对象，那么会抛出 OutOfMemoryError 异常。

**类加载机制**
**类加载过程 主要是 加载、验证、准备、解析、初始化 
- 加载 将字节码⽂件加载到运⾏时数据区的⽅法区中 
- 验证 对字节码的规范进⾏⼀些校验，⽐如魔数。主次版本号等 
- 准备 将类中的静态变量分配内存并且赋默认值，⽐如boolean类型 的赋false final修饰的static变量在编译时已经赋预期值 
- 解析 将符号引⽤转变为直接引⽤ 符号引⽤是在字节码⽂件中以字符串形式表示的 直接引⽤则是指向内存中的实际对象或函数的指针 
- 初始化 对类中的静态变量赋预期值以及执⾏静态代码块
[类加载器机制](http://66dr.cn/2024/01/24/Java%E5%9F%BA%E7%A1%80-JVM/)

**JVM参数调优**

#### 常用设计模式：
- 单例、工厂、策略、代理模式
- 策略模式，命令模式，模板模式区别
#### Spring、SpringMVC、SpringBoot、SpringCloud、Mybatis：
- AOP、IOC
- Spring事务、@Transactional()注解底层原理
- SpringBoot自动配置原理
- Nacos主要作用、注册中心原理
- Eureka的区别

#### Mysql

- Sql优化
- Mysql IO数据库的Page页原理

#### Redis
- redis数据类型根据业务场景来选择；
- 持久化策略
- 事务机制
- 分布式锁（多）
- 熟悉缓存穿透，缓存击穿，缓存雪崩等问题的解决方案。
- redis单点故障
- redis的集群模式cluster主（写）从（读）、哨兵模式

#### rocketMq：
- 特性/为啥要用mq
- mq持久化机制
- 如何保证mq的全局有序性全局有序
- 事务消息
- TODO：kafka补充



微服务
- RPC、序列化兼容性
- Dubbo序列化串行


### 项目难点：
三层架构设计：

### 场景问题：
#### 死锁问题
在高并发环境下，两个线程互相持有对方所需要的对象资源。就会产生死锁。

发生了死锁怎么解决？
排查：通过sql进行排查
show engine innodb status;
然后定位到相关代码并修改。

**如何避免死锁问题的发生**？
银行家算法。
#### 查询过慢
优化sql、多表联查，跨微服务跨库，多数据源配置。




#### OOM问题规避和定位
- 一次性申请太多的数据量，比如把数据库的所有数据查出来，list中是会出现内存溢出的。
- 内存资源创建太多未释放，不断创建线程，创建很多JDBC Connection，没有释放。（解决方案：利用池化的思想，最多只允许申请有限数量的资源，超出就进行阻塞。）
- 本身资源不够（查看堆内存 jmap -heap 查看堆内存信息，进行调整）

**如何针对项目避免OOM？**
比如说，数据量特别大的数据需要展示。
- 设计数据结构合理，考虑分页加载、按需加载（通过滑动控制，后端分批去取数据）等方式来减少内存占用。
- 代码层面：流式处理等方式来减少内存消耗。（Stream API 支持并行处理数据，可以利用多核处理器的优势，提高数据处理的效率。通过调用 `parallel()` 方法将流转换为并行流，可以让 Stream API 在多个线程上并发执行操作。）
- 通过设置JVM参数：`-Xmx`：设置 JVM 堆内存的最大大小，例如 `-Xmx4G` 表示设置堆内存最大为 4GB。通过限制堆内存的大小，可以控制 GC 的触发和执行频率。
- **监控内存使用**：一些常用的工具包括 JVisualVM、VisualVM，可以显示堆内存、非堆内存、线程、GC 情况等信息，帮助我们开发 了解应用程序的内存状况，及时发现内存泄漏和性能问题，并进行调优和优化。
- 使用缓存（Ehcache）、内存（Redis）管理。将频繁访问的数据缓存在内存中，减少数据库查询和计算，提高数据访问的速度和性能。

**如何定位问题？**
1.系统已经已经挂掉了：（提前配置 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath）
对于 已经发⽣OOM的系统 ⼀般⽣产系统中都会配置发⽣OOM的时候⽣成dump⽂件，我们 可以通过jvisualvm进⾏分析，找出dump⽂件异常的地⽅⽐如异 常的线程、对象，定位到具体的代码位置，然后进⾏详细分析。
2.系统还没挂掉：jmap -dump:format=b,file=xushu.hprof 14660 利用Arthas进行分析
（不导出dump文件：jps查看jar包的pid，jmap -histo:live 2486 查看dump中的占用情况分析。难以定位）
3.结合jvisualvm 进行调试：查看最多跟业务有关对象->找到GCRoot ->查看线程栈（查看引用调用）

Arthas常⽤指令 
- trace ⽅法内部调⽤路径，并输出⽅法路径上的每个节点上耗时： trace linc.cool.Main main -n 5 --skipJDKMethod false 
- watch 函数执⾏数据观测： watch linc.cool.Main main '{params,returnObj,throwExp}' -n 5 -x 3

#### 如何排查优化慢接口
优化接口速度，我的三板斧，首先用阿里Arthas看下哪段耗时；然后SQL的问题就加索引，如果是代码问题，存在 for循环改成parallelStream流，同步的任务用CompletableFuture做成异步的，这样优化下来，接口响应时间基本上能接受了。
- 用`trace org.example.MyController#handleRequest`命令来跟踪接口处理方法的执行时间。
- parallelStream应用（如下demo）
- CompletableFuture异步（见Java并发编程Demo）

```java
import java.util.ArrayList;
import java.util.List;

public class ParallelStreamExample {
    public static void main(String[] args) {
        // 假设有一个包含大量数据的List
        List<String> dataList = new ArrayList<>();
        for (int i = 0; i < 1000000; i++) {
            dataList.add("Data" + i);
        }

        // 使用普通的for循环处理
        long startTime = System.currentTimeMillis();
        for (String data : dataList) {
            process(data);
        }
        long endTime = System.currentTimeMillis();
        System.out.println("Sequential processing time: " + (endTime - startTime) + " ms");

        // 使用并行流处理
        startTime = System.currentTimeMillis();
        dataList.parallelStream().forEach(ParallelStreamExample::process);
        endTime = System.currentTimeMillis();
        System.out.println("Parallel stream processing time: " + (endTime - startTime) + " ms");
    }

    // 假设这是需要对每个数据进行的处理方法
    public static void process(String data) {
        // 这里可以是一些处理逻辑，比如对数据进行计算、转换等
        // 在这个例子中，我们只是简单地打印数据
        System.out.println("Processing data: " + data);
    }
}
```


#### 如何优化SQl

字面优化方案
1. 针对查询较慢的语句，可以使用explain来分析该语句的具体执行情况。（根据 `EXPLAIN` 输出结果中的 `type`、`possible_keys`、`key`、`rows` 等指标，分析查询性能的瓶颈所在。例如，是否使用了索引、是否进行了全表扫描、是否存在大量的估算行数等。）
2. select子句中避免使用 *，当只需要一行数据的时候。使用limit 1。
3. 避免在索引列上使用计算、not in 和 <、>等操作。
4. 尽量选择需要（查询）的列，将where中用的比较频繁的字段建立索引
5. 表数据量预期超过200w，提前去分割表。
6. 选择最有效的表名顺序，from字句中写在最后的表是基础表，将被最先处理，在from子句中包含多个表的情况下，你必须选择记录条数最少的表作为基础表。
7. 尽量缩小子查询的结果
- **使用 EXISTS 替代 IN：** 在某些情况下，使用 EXISTS 子查询可以替代 IN 子查询，并且性能更好。EXISTS 子查询只需要判断是否存在匹配的行，而不需要返回所有匹配的行，因此可以节省资源。- 
- **使用 JOIN 替代子查询：** 在某些情况下，使用 JOIN 操作可以替代子查询，并且性能更好。JOIN 操作可以在一次查询中同时获取主查询和子查询的结果，避免了多次查询的开销。例如，将 `SELECT * FROM table1 WHERE column1 IN (SELECT column1 FROM table2)` 替换为 `SELECT table1.* FROM table1 INNER JOIN table2 ON table1.column1 = table2.column1`。
- **优化子查询中的条件：** 对子查询中的条件进行优化，尽量减少匹配的行数。例如，添加合适的索引、使用适当的过滤条件等。
- **避免在子查询中使用聚合函数：** 在子查询中使用聚合函数（如 SUM、COUNT、MAX 等）可能会导致查询的性能下降，尤其是在大数据量的情况下。如果可能的话，尽量避免在子查询中使用聚合函数，或者考虑将聚合操作移动到主查询中。
- **使用适当的子查询类型：** 根据实际情况选择合适的子查询类型，例如标量子查询、表子查询、联结子查询等。不同类型的子查询对性能的影响不同，因此需要根据具体情况进行选择。）

#### 如何解决幂等性问题？
- 唯一标识符：UUID（前端生成传给后端）
- **乐观锁**：在并发环境下，可以使用乐观锁来确保操作的原子性和一致性。通过**版本号**或者**时间戳**等方式，避免重复更新数据。
- **状态管理**：在系统中对操作的状态进行管理，确保每个操作只能被执行一次。例如，通过状态标识或者状态机来管理操作的状态，避免重复执行操作。

#### 如何解决接口超时问题？
在http接口中，为了避免接口超时。我们会将接口中较为耗时的操作，改成异步的形式执行。
小项目：多线程（实现：线程池+completablefuture的形式，消耗cpu资源）；
大项目：完成前置操作后，用mq进行异步操作（场景：用户注册会员完成后，会有一些发优惠券/手机号验证码/信息关联操作）

#### 分布式锁问题？
主要解决了并发访问情况下，避免竞争条件、数据不一致和死锁等问题，从而确保系统的正确性和稳定性。

为了避免竞争条件，可以采用各种同步机制，如互斥锁、信号量、条件变量等，来确保对共享资源的安全访问。分布式锁也是一种避免竞争条件的机制，在分布式系统中可以保证对共享资源的互斥访问，避免并发访问导致的竞争条件问题。

#### QPS问题
QPS问题如何回答？[参考](https://www.jianshu.com/p/1a177dfd40cb)

服务器配置：4/500QPS：十几台、4核8G；激增就30台

拿秒杀活动的预期QPS举例计算，我们需要考虑以下几个因素：

1. **活动持续时间**：秒杀活动持续多长时间？例如，持续1小时、半小时或更短的时间。

2. **活动期间每个客户的请求频率**：在活动期间，每个潜在客户的请求频率。这通常会比平时高很多，因为他们会不断刷新页面或尝试购买商品。

3. **系统能够处理的最大请求量**：系统的处理能力，即系统能够每秒处理的最大请求数量。

给定上述信息，我们可以计算秒杀活动的预期QPS。假设秒杀活动持续1小时，潜在客户的请求频率为10次/秒，系统能够处理的最大请求数量为1000次/秒。

那么预期的QPS可以计算如下：
预期QPS=潜在客户量×每个客户的请求频率预期QPS = 潜在客户量×每个客户的请求频率

这表示在秒杀活动期间，预计系统会在每秒处理60个请求。

实际的QPS可能会受到许多其他因素的影响，例如网络延迟、并发请求处理时间等。因此，在设计和准备秒杀活动时，需要进行合理的压力测试和容量规划，以确保系统能够承受活动期间的高并发访问。

#### 服务器如何选择

这里按照中小型企业的服务器的配置部署微服务，以下是一些通用的建议和推荐的服务器配置：

1. **CPU**：至少使用具有多核心的CPU，以确保能够处理多个并发请求。对于中小型企业来说，通常选择 4 核心或 8 核心的 CPU 是合适的。

2. **内存**：微服务架构通常需要大量的内存来存储服务之间的通信数据、缓存数据等。建议至少配置 16GB 或更多的内存，以确保足够的内存可供服务使用。

3. **存储**：选择高速、可靠的存储设备，如 SSD（固态硬盘），以提高服务的读写性能。对于中小型企业来说，通常配置 500GB 或 1TB 的 SSD 存储是合适的。

4. **网络**：确保服务器具有高速、稳定的网络连接，以便服务之间能够快速进行通信。选择支持千兆以太网的网络接口，以确保足够的带宽和网络性能。

5. **操作系统**：选择稳定、安全的操作系统，如 CentOS、Ubuntu 等。对于微服务架构来说，Linux 操作系统通常是首选，因为它具有良好的性能和稳定性，并且可以轻松部署和管理 Docker 容器等。

6. **容器化平台**：考虑使用容器化平台（如 Docker、Kubernetes 等）来部署和管理微服务。容器化可以提高部署的灵活性和可靠性，同时也能够更高效地利用服务器资源。

7. **监控与管理工具**：选择适合的监控与管理工具，用于监控服务器的性能、资源利用率、服务状态等。常见的监控与管理工具包括 Prometheus、Grafana、ELK Stack（Elasticsearch、Logstash、Kibana）等。

8. **备份与容灾**：配置定期的数据备份和容灾方案，以确保数据的安全性和可靠性。可以考虑使用自动化备份工具和云存储服务来简化备份和恢复过程。

按照4核8G的配置，网络默认企业级千兆。
QPS计算：每分钟请求数量/60 （s）；

在性能优化的情况下，这样的服务器可以支撑高达5万QPS（每秒查询率），这是在压力测试QPS不低于3万、数据库负载不超过50%、服务器负载不超过70%、单次请求时长不超过70ms、错误率不超过5%的条件下实现的。



#### 数据库、缓存、MQ的一致性？

#### TODO 先调用数据库还是先调远程接口？（分场景）


### 其他问题

公司自研框架问题
- 构成：一些自定义的配置注入（比如跨域配置、拦截器、OpenFeign配置、对MybatisPuls的二次封装，封装了一些常用的方法(原mybatis-plus中没有的)、）（Redis分布式锁、过期时间控制注解：实际写入简历中）
**发送一个请求流程**


## 三、工作实操问题
Java8新特性：lamad表达式、Stream流用法、LocalDate、
Java9-10新特性：
Java11新特性：
Java12-16新特性：
Java17新特性：
Java18新特性：
Java19新特性：
Java20新特性：
Java21新特性（重要）：

常用设计模式：
算法：


## 四、团队配合经验问题

1.跟产品经理配合确认设计方案，是否可行，设计模式设计。
2.跟项目经理配合确认项目排期划分，模块复杂程度，模块排期。
3.跟前端同学确认返回数据类型，确认返回字段值，确认返回字段意义类型Apifox。
4.跟后端同时确认开发接口，后端开发设计模式，确认分支，哪块代码为什么要这样写，代码提交配合。

## 五、拒绝Offer
首先感谢您的offer，经慎重考虑还是觉得另外一家公司更符合自己的职业发展规划，无法按计划入职了。抱歉给贵公司和您的工作添麻烦了。非常非常感谢责公司能够给予我的 offer与机会，公司能够给予我这么好的机会是我的荣幸。经历了公司的总体面试流程，我觉得每位面试官都非常专业有温度，面试流程都规范且非常有水平。我非常喜欢贵公司，希望贵公司能找到更加适合这个职位的人选。我也有朋友也是做人事工作的，我有了解到hr工作的不易，各种审批事项都很麻烦,真的非常抱歉。

## 六、面试记录
23.3-4
- 上海理想（1挂）
- 银科控股（2刷）
- 德承珠宝（1挂）
- 赢时胜（1挂）
- 新开普（1挂）
- 软通-外包蚂蚁技术支持（2刷）
- 外包-国际电子（1挂）
- 3上海复深蓝-外包太平洋保险（1刷-2捞-去）
- 运柯能（1挂）
- 上海轻流笔试（1挂）
- 1奥索斯科技 -> 天迪科源（2-拒）
- 2深圳壹账通智能科技有限公司(2-拒)
- 上海嘉银科技股份有限公司（1挂）
- 北京居小易住房租赁有限公司（1-base不合适）
- 上海东孝数字（1挂）
